{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}schedule-page{% endblock %}

{% block content %}
<div class="body normal">
    <h1 class="title" style="font-size: var(--font-size-16); letter-spacing: normal; font-family: 'SourceCodePro'; color: #f2a6b5;">{{ page.title }}</h1>

    {% if page.intro %}
    <div class="schedule-intro rich-text">
        {{ page.intro|richtext }}
    </div>
    {% endif %}

    {% if featured_events %}
    <section class="schedule-section featured-events">
        <h2 class="section-heading">Upcoming Events</h2>
        <div class="schedule-grid">
            {% for event in featured_events %}
                <div id="{{ event.title|slugify }}" class="schedule-listing-item event-item">
                    <section class="event-header">
                        <section>
                            <h2 style="font-family: var(--font-family-main); font-weight: 700;">{{ event.title }}</h2>
                            {% comment %}
                            {% if event.event_type %}
                            <section class="event-header__type">
                                <p style="font-weight: var(--font-weight-light); font-family: var(--font-family-heading); font-size: var(--font-size-detail, 12px);">{{ event.event_type }}</p>
                            </section>
                            {% endif %}
                            {% endcomment %}
                        </section>
                        <h3>{{ event.month }}{% if event.year %} {{ event.year }}{% endif %}</h3>
                        {% if event.link %}
                        <a href="{{ event.link }}" class="view-event">More Information</a>
                        {% endif %}
                    </section>

                    {% if event.featured_image %}
                    <div class="event-gallery">
                        {% image event.featured_image width-300 as thumb %}
                        <div class="gallery-thumb">
                            <img src="{{ thumb.url }}" alt="{{ event.title }}" loading="lazy">
                        </div>
                    </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}


    {% if page.body %}
    <div class="schedule-content">
        {% include_block page.body %}
    </div>
    {% endif %}

    {% if not featured_events %}
    <div class="empty-state">
        <p>No events currently scheduled.</p>
    </div>
    {% endif %}

    <div class="schedule-contact">
        {% if page.submission_info %}
        <div class="schedule-submission-info rich-text">
            {{ page.submission_info|richtext }}
        </div>
        {% endif %}

        {% if page.contact_email %}
        <div class="schedule-contact-email">
            <a href="mailto:{{ page.contact_email }}" class="email-link">{{ page.contact_email }}</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
