{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}schedule-page{% endblock %}

{% block content %}
<div class="body normal">
    <h1 class="title">{{ page.title }}</h1>

    {% if page.intro %}
    <div class="schedule-intro rich-text">
        {{ page.intro|richtext }}
    </div>
    {% endif %}

    {% if events %}
    <div class="schedule-events">
        {% for event in events %}
            <div class="schedule-event">
                <div class="schedule-event__header">
                    <div class="schedule-event__type-month">
                        {% if event.event_type %}
                        <h3 class="schedule-event__type">{{ event.event_type }}</h3>
                        {% endif %}
                        <h3 class="schedule-event__month">{{ event.month }}</h3>
                    </div>
                    <h2 class="schedule-event__title">{{ event.title }}</h2>
                </div>

                {% if event.description %}
                <div class="schedule-event__description rich-text">
                    {{ event.description|richtext }}
                </div>
                {% endif %}

                {% if event.featured_image %}
                <div class="schedule-event__image">
                    {% image event.featured_image fill-800x450 class="schedule-event__img" %}
                </div>
                {% endif %}

                {% if event.link %}
                <div class="schedule-event__link">
                    <a href="{{ event.link }}" class="button">More Information</a>
                </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if page.body %}
    <div class="schedule-content">
        {% include_block page.body %}
    </div>
    {% endif %}

    <div class="schedule-contact">
        {% if page.submission_info %}
        <div class="schedule-submission-info rich-text">
            {{ page.submission_info|richtext }}
        </div>
        {% endif %}

        {% if page.contact_email %}
        <div class="schedule-contact-email">
            <a href="mailto:{{ page.contact_email }}" class="email-link">{{ page.contact_email }}</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}